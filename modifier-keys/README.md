# Modifier Keys

在状态栏显示键盘修饰键（Super、Alt、Ctrl、Shift）的按下状态、最近按下的普通按键，以及触摸板手势。

## 功能

### 键盘
- 实时显示 4 个修饰键状态：⌘ ⌥ ⌃ ⇧
- 按键按下时图标高亮显示（颜色变化）
- 显示最近按下的普通按键（最多1个）
- 延迟消失机制：按键松开后延迟0.5秒再消失（按住时持续显示）
- 点击显示帮助面板，展示各键名称

### 触摸板手势
- 光标移动：单指滑动时显示光标图标
- 单指点击：显示左键图标
- 双指点击：显示右键图标
- 三指点击：显示中键图标
- 双指滚动：显示滚动方向（⇇⇈⇉⇊）
- 三指滑动：显示滑动方向（切换工作区/窗口）
- 四指滑动：显示滑动方向（进入 overview）
- 双指缩放：显示缩放方向（放大/缩小）

## 自定义符号

右键点击状态栏图标 → 选择「符号设置」打开设置面板。

支持的符号配置：

| 键名 | 描述 | 默认值 |
|------|------|--------|
| scroll | 滚动方向 [左, 上, 右, 下] | ["⮆", "⮇", "⮄", "⮅"] |
| swipe3 | 三指滑动 [左, 上, 右, 下] | ["🡆", "🡇", "🡄", "🡅"] |
| swipe4 | 四指滑动 [左, 上, 右, 下] | ["⭲", "⭳", "⭰", "⭱"] |
| click | 左键点击 | 󰳽 |
| rightClick | 右键点击 | 󰳾 |
| middleClick | 中键点击 | 󰻃 |
| motion | 光标移动 | 󰆽 |
| pinchIn | 缩小 | 󰩯 |
| pinchOut | 放大 | 󰩮 |

## 依赖

### 系统依赖

- **libinput**：用于捕获键盘事件
  ```bash
  # Arch Linux
  sudo pacman -S libinput

  # Debian/Ubuntu
  sudo apt install libinput
  ```

### 权限配置

需要将当前用户加入 `input` 用户组以读取键盘事件：

```bash
sudo usermod -aG input $USER
```

然后重新登录或重启系统使权限生效。

## 安装

将插件复制到 Noctalia Shell 插件目录：

```bash
./tools/deploy.sh
```

## 使用

- 状态栏显示 4 个图标，分别对应 Super、Alt、Ctrl、Shift 键
- 按下对应按键时，图标会变亮并显示强调色
- 按下普通按键时，会在修饰键后面显示（最多1个）
- 松开按键后，延迟0.5秒再消失
- 左键点击图标区域打开帮助面板
- 右键点击图标区域打开符号设置

## 显示示例

### 键盘
- 单独按 `j`：显示 `j`（0.5秒后消失）
- 按 `Shift + j`：显示 `⇧ j`（修饰键高亮，0.5秒后消失）
- 按 `Ctrl + c`：显示 `⌃ c`（修饰键高亮，0.5秒后消失）

### 触摸板手势符号

| 事件类型 | 手指数量 | 物理动作 | 显示符号（左 上 右 下） |
|---------|---------|---------|---------------------|
| 光标移动 | 1 | 单指滑动 | 󰆽 |
| 点击 | 1 | 按下触摸板 | 󰳽 |
| 右键 | 2 | 双指点击 | 󰳾 |
| 中键 | 3 | 三指点击 | 󰻃 |
| 滚动 | 2 | 双指位移 | ⇇ ⇈ ⇉ ⇊ |
| 切换 | 3 | 三指滑动 | 󰛁 󰛃 󰛂 󰛀 |
| 调度 | 4 | 四指滑动 | 󰧘 󰧜 󰧚 󰧖 |
| 缩放 | 2 | 双指捏合 | 󰩮 󰩯 |
